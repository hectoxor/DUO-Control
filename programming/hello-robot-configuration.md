# Hello Robot - Configuration

Configuration is one of the most commonly misunderstood, or forgotten, steps required for programming a robot. This section sets out to explain the importance of configuration and common misconceptions of configuration by answering the following questions:&#x20;

1. [What is configuration?](hello-robot-configuration.md#the-importance-of-configuration)
2. [How do you configure hardware elements?](hello-robot-configuration.md#configuring-common-hardware-devices)
3. [What are common issues that are caused by a problem with the configuration file?](hello-robot-configuration.md#common-errors-in-hardware-mapping)

## The Importance of Configuration

While every REV Control Hub is the same, the robots being controlled by the Control Hub are not. Each Control Hub has the same number of motor ports, servo ports, digital ports, and the like, but how each user utilizes these ports varies from system to system. For instance, a Color Sensor V3 may be plugged in to I2C Bus 1 on one users Hub, but another user might use the same bus to host a 2m Distance Sensor.&#x20;

The Control Hub knows that there is an I2C device attached to the port. But it doesn't naturally have the information needed to translate that information to an Op Mode or tell the op mode which drivers need to be accessed in order to use this sensor. A user needs to provide additional information, so that the internal software in the Hub can take information from the Op Mode and apply it to a corresponding external hardware port and vice versa. This process is known as hardware mapping. Hardware mapping is a two step process that includes: the creation of a readable file known as a **configuration file** and calls to the **hardware map** within an Op Mode.&#x20;

#### The Configuration File&#x20;

The configuration file is a readable file created by the user through the Driver Station Application. When creating a configuration file users are required to assign each device to a port, select the type of device it is from options provided by the SDK, and give it a **unique** name.&#x20;

{% hint style="info" %}
In programming its important to distinguish between variables, by giving each variable a different name.&#x20;
{% endhint %}

Once a configuration file is saved or activated the robot will restart. This restart is so the SDK can read the file, determine what devices are present, and add the devices to the hardwareMap class.

#### The Hardware Map &#x20;

On the user-created op mode side of the fence is the hardwareMap class. This class is where the information created in the configuration is available for use in Blocks, OnBot Java, or Android Studio code.&#x20;

The level of access or interaction a user has with the hardwareMap class depends on which programming tool they are using. Since Blocks is a collection of predetermined code snippets, it creates references to the hardwareMap whenever a variable code snippet, corresponding to an external hardware, is first referenced. However, with Onbot Java and Android Studio the reference to the hardwareMap requires that a variable be created and assigned to an external hardware unit within the hardwareMap&#x20;

{% hint style="info" %}
Information on referencing the hardwareMap class in Java will be further explained in the [Test Bed - OnBot Java section](hello-robot-test-bed/test-bed-onbot-java.md).&#x20;
{% endhint %}

## Configuring Common Hardware Devices

### Accessing the Configuration Utility

| ​                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ​                                                                                                                                                                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Select the menu in the stop right corner of the Driver Station. Then select **Configure Robot**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | <p>​</p><p><img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiCJhQmCQhxo_gWkbp%2Faccessing%20config%20page.svg?alt=media&#x26;token=32938748-6487-4426-bffd-5c6e8484c0d3" alt="" data-size="original"></p> |
| In the **Available configurations** page, select New.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | <p>​</p><p><img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiDXJ_oFBl3ZWJ6gdd%2FSelect%20new.svg?alt=media&#x26;token=80c559e3-f528-4a85-a108-4c9bb2d2e949" alt="" data-size="original"></p>              |
| <p>In the <strong>USB Devices in configuration</strong> page select the <strong>Control Hub Portal</strong>.</p><p>​</p><p><strong>Note:</strong> If you have an Expansion Hub it will appear as an <strong>Expansion Hub Portal</strong>.</p>                                                                                                                                                                                                                                                                                                                                                                | <p>​</p><p><img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiE91Rql7pL5KhVvba%2Fopen%20portal.svg?alt=media&#x26;token=dcfcec4b-a5fb-46ff-bc73-0063a4684fb7" alt="" data-size="original"></p>             |
| <p>Within the Hub Portal select the device you want to configure. In this use case, select the Control Hub.</p><p><strong>Note:</strong> if you have an Expansion Hub connected to a Control Hub, the Expansion Hub will also appear as a configurable device in the portal.</p>                                                                                                                                                                                                                                                                                                                              | <p>​</p><p><img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiHPL2LNeqCeEBqLeL%2Fselect%20CH&#x27;.svg?alt=media&#x26;token=808ffb3d-87bb-446d-8db9-e480aee8925c" alt="" data-size="original"></p><p>​</p> |
| <p>This will bring you to the page shown in the image. From here you can configure motors, servos and sensors that you are using. Follow through the rest of the guide to figure out how to configure devices that will be used in the Test Bed section.</p><p>​</p><p><strong>Note:</strong> The way that Digital and Analog devices are configured versus how I2C devices are configure differ significantly. This is because each physical I2C port is a different bus that can host multiple different sensors. For more information on the different types of sensors check out the sensors section.</p> | <p>​</p><p><img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmXm9HpZDdw5O4r99V%2Fconfifguration.svg?alt=media&#x26;token=624d33bf-8d61-485e-821b-7f76499193c5" alt="" data-size="original"></p><p>​</p>    |

### Configuring Hardware&#x20;

The following section will show how to configure components that will be used in the Test Bed. The hardware type and names have been chosen in consideration for the Hello World lesson plan. Users should heed notes within the steps to consider when creating configuration files for other instances.&#x20;

{% tabs %}
{% tab title="Motor" %}
#### Configuring a Motor

|                                                                                                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Select **Motors.**                                                                                                                                                                                                                                                                                                                                        | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiHa9RouNNK8dv86Lw%2Fselect%20motors.svg?alt=media&#x26;token=215b933d-5975-4957-9538-aa9a12b63a1f" alt="" data-size="original">    |
| <p>The Motor page will allow you to configure all four motor ports on the Hub. On <strong>Port 0</strong> open the drop down menu and select <strong>REV Robotics Core Hex Motor</strong>. </p><p><strong></strong></p><p><strong>Note:</strong> In your configuration file you should configure the motor ports to the type of motor you are using. </p> | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiLDlKPLlUjmcAqlTU%2Fmotor%20selection.svg?alt=media&#x26;token=cac3bfc6-9007-47ee-b58e-a8489aebdb73" alt="" data-size="original">  |
| <p>Name the motor <strong>test_motor</strong>. Select <strong>done.</strong> </p><p><strong></strong></p><p><strong>Note:</strong> remember when naming hardware in the configuration file that the REV Control System is <strong>Case Sensitive.</strong> </p>                                                                                           | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiLneCUOA5Mmab8YoR%2Fname%20motor.svg?alt=media&#x26;token=8ec4ec14-5236-434f-809b-b23bc979462b" alt="" data-size="original">       |
{% endtab %}

{% tab title="Servo" %}
#### Configuring a Servo

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Select **Servos.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJlt67BCqIShyalxpdI%2Fselect%20servos.svg?alt=media&#x26;token=4e81f03a-1bee-4d01-8de0-f380fb56590c" alt="" data-size="original">    |
| <p>The Servo page will allow you to configure all six servo ports on the Hub. On <strong>Port 0</strong> open the drop down menu and select <strong>Servo</strong>.</p><p></p><p><strong>Note:</strong> REV Servos can be configured as a <strong>Servo</strong> or a <strong>Continuous Rotation Servo</strong>. The type of device a servo is configured as should correspond with the mode the sensor is in. For more information on Sensor modes visit the <a href="broken-reference">Sensor section</a>. </p> | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiBzBAA2jNr3TiX54-%2F-MJiO8PJyTyA3hHBQ9ew%2Fservo%20selection.svg?alt=media&#x26;token=12a07d68-87e9-45d4-b7e8-8213417b2936" alt="" data-size="original">  |
| <p>Name the servo <strong>test_servo</strong>. Select <strong>done.</strong> </p><p><strong></strong></p><p><strong>Note:</strong> remember when naming hardware in the configuration file that the REV Control System is <strong>Case Sensitive.</strong> </p>                                                                                                                                                                                                                                                    | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJm65WQAZZFC2Zh2_qB%2Fname%20servo.svg?alt=media&#x26;token=32b55fae-4c14-4e93-9b5e-aa3470c8d153" alt="" data-size="original">       |
{% endtab %}

{% tab title="Digital Device" %}
#### Configuring a Digital Device

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                         |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Select **Digital Devices**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJm56FmciyoICiKoNCe%2Fselect%20digital%20devices.svg?alt=media&#x26;token=940dae85-867d-4ccd-bf23-7ea089792eeb" alt="" data-size="original">  |
| <p>The Digital Devices page will allow you to configure all eight digital ports on the Hub. On <strong>Port 1</strong> open the drop down menu and select <strong>Digital Device</strong> .</p><p></p><p><strong>Note:</strong> Touch Sensors must always be configured on odd number ports. Check out the <a href="../sensors/digital.md">Digital Sensor section</a> for more information.<br></p><p><strong>Note:</strong> Touch Sensors can be configured as a REV Touch Sensor or a Digital Device. In the FTC SDK the type of device it is configured as changes the classes and methods that can be used. </p> | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJm5CRJlyXVZeOLKrCg%2Fdd%20type%20selection.svg?alt=media&#x26;token=4a792d7b-ba08-4953-9156-558adfa1f0cf" alt="" data-size="original">       |
| <p>Name the motor <strong>test_touch</strong>. Select <strong>done.</strong> </p><p><strong></strong></p><p><strong>Note:</strong> remember when naming hardware in the configuration file that the REV Control System is <strong>Case Sensitive.</strong> </p>                                                                                                                                                                                                                                                                                                                                                      | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJm8V0dU2fAAdxoZvR-%2Fname%20dd.svg?alt=media&#x26;token=fe37e820-bacf-4d45-b837-5d425d2c82e5" alt="" data-size="original">                   |
{% endtab %}

{% tab title="I2C Device" %}
#### Configuring an I2C Device

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                         |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Select **I2C Bus 0**.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmJm2USfnZETQaVhb4%2Fselect%20I2C.svg?alt=media&#x26;token=e82c6e4d-9ce4-4767-be93-4e5a762f1ffd" alt="" data-size="original">                |
| <p>Select Add. </p><p></p><p><strong>Note:</strong> Each I2C Bus can host more than one I2C sensor as long as the I2C addresses do not conflict. Bus 0 will always host the internal IMU. For more information on I2C sensors visit the <a href="../sensors/i2c/">I2C section</a>. </p>                                                                                                                                                                                         | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmMrXvJyruqi_hNMRL%2FAdd%20to%20the%20IMU%20Bus.svg?alt=media&#x26;token=ec81dfd6-15e2-47ae-9868-5c4c0ec67596" alt="" data-size="original">  |
| <p>On <strong>Port 1</strong>, which was created in the previous step<strong>,</strong>  open the drop down menu and select <strong>REV Color Sensor V3.</strong> </p><p><strong></strong></p><p><strong>Note:</strong> If you are using Color Sensors V1 or V2 select <strong>REV Color/Range Sensor.</strong> For more information on configuring with the REV Color Sensors visit the <a href="https://docs.revrobotics.com/color-sensor/">Color Sensor Datasheets</a>. </p> | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmMw7UkfDN-4u3A1Tc%2Fi2c%20type%20selection.svg?alt=media&#x26;token=dc3dfc70-673d-4e9c-903e-dfb099834322" alt="" data-size="original">      |
| <p>Name the motor <strong>test_color</strong>. Select <strong>done.</strong> </p><p><strong></strong></p><p><strong>Note:</strong> remember when naming hardware in the configuration file, that the REV Control System is <strong>Case Sensitive.</strong> </p>                                                                                                                                                                                                                | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmWiS02E-x_HahXwsC%2Fi2c%20complete.svg?alt=media&#x26;token=6ec56273-eb43-4fda-bc38-afb202142c54" alt="" data-size="original">              |
{% endtab %}
{% endtabs %}

### Saving the Configuration File

|                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                        |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Hit **Done** twice until you reach the USB Devices in configuration page**.** On the USB Devices in configuration page hit **Save.**                                                                                                                                  | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmh3sci5QaxHKS1ESx%2Fdone.svg?alt=media&#x26;token=0d5c007c-e6ba-42c0-bd45-6f7cd0e8c8ff" alt="" data-size="original">                       |
| <p>Name the configuration <strong>helloRobotTest</strong> and then select <strong>Ok.</strong></p><p></p><p><strong>Note:</strong> The FTC SDK does not force you to abide by a naming convention for but it is common to name configurations in lowerCamelCase. </p> | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJmhrpieuXUvy0eYB2F%2Fnamingthe%20config%20file.svg?alt=media&#x26;token=bbd31040-ee63-48fa-91e6-78e1c144fcda" alt="" data-size="original">  |
| Press back to activate the saved configuration. Your Robot Controller will restart once you activate a new configuration.                                                                                                                                             | <img src="https://2589213514-files.gitbook.io/~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4_pJHI8HTuZFQTNfcy%2F-MJiOAG2YMGTGR9cvSRd%2F-MJn40i4IMWIZsrzTMZb%2Ffinished.svg?alt=media&#x26;token=10085062-bb7f-42de-a88d-2554f822588d" alt="" data-size="original">                   |

## Common Errors in Hardware Mapping

Within the programming and software world errors come in many different forms and types. When hardware mapping there are two major errors that you may run into. Both errors fall into common categories of software errors:

* [Interface Errors ](https://textexpander.com/blog/the-7-most-common-types-of-errors-in-programming-and-how-to-avoid-them/)- are errors between how an interface should work and how it actually behaves
* [Runtime Errors](https://textexpander.com/blog/the-7-most-common-types-of-errors-in-programming-and-how-to-avoid-them/) - are errors that occur when a program is being executed&#x20;

#### Interface Errors                                                      &#x20;

Interface errors occur in the SDK when the parameters of the SDK interface are not met. In the hardware mapping process the most common interface error occurs with the Blocks Programming Tool. As mentioned in the[ ](broken-reference)[Introduction to Programming ](hello-robot-introduction-to-programming.md)section, Blocks hides complexities of the SDK library from the users. One way it does this is by automatically creating references to the hardwareMap when code snippets for an external hardware unit are used.&#x20;

In order to automate the hardwareMap calls the Blocks interface reads the configuration file and creates hardware variables based off of the information it finds. For this reason it is important to create a configuration file before trying to code.&#x20;

The image below shows two different interface versions of Blocks. In the version with no configuration file there are no drop down menus to access code snippets specific to actuators or sensors. In the version of the interface with a configuration file the drop down menus are present and the motor-specific code snippets are access

![](https://2589213514-files.gitbook.io/\~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4\_pJHI8HTuZFQTNfcy%2F-MKHQxhOUOSuaOCK1jrQ%2F-MKMPRpcaVuc5yYIS1il%2FBlocks\_no%20config.svg?alt=media\&token=0091afe0-3f0d-4b40-b13f-5a1bd0e43bd1)

#### Runtime Errors&#x20;

Within the SDK runtime errors occur during initialization or run. One of the most common runtime errors within the REV Control System is exhibited in the image below.

![](https://2589213514-files.gitbook.io/\~/files/v0/b/gitbook-legacy-files/o/assets%2F-M4\_pJHI8HTuZFQTNfcy%2F-MKMW3WcwtMIeYcS4yiJ%2F-MKMWnHtM4JI96a0M\_ku%2Fruntime%20error.svg?alt=media\&token=9af5b66a-f8e0-448f-a167-b7541b423b38)

This error is indicative of an inconsistency between how a hardware device is called within the code and how that compares against the name used in the configuration file. There are two different ways this error can occur.&#x20;

The first occurrence of this error is when there is no configuration file found. This can mean that a configuration file has not been created, a file has been created but is not active, or the wrong file is being used. When any of these instances happen, the code is requesting a device name and type that the hardware map is unable to locate in the configuration file. The program stops on the first such device name it's unable to locate.&#x20;

An incorrect reference to the hardwareMap can also cause this error to occur. Unlike Blocks, OnBot Java and Android Studio require that a programmer hard code the hardwareMap call. If the reference name in the call does not correspond with the name of the device in the configuration file (it is case sensitive) the code will build without failure but the runtime error will occur. Lets use the configuration file from the previous section as an example; where there is a touch sensor named `"test_touch"` and a motor name `"test_motor"` .

{% hint style="info" %}
The quotations marks indicate that`"test_touch"` and `"test_motor"` represent a string variable that corresponds with the names of the devices in the configuration.&#x20;
{% endhint %}

```java
public class HR_test extends LinearOpMode{
    private DigitalChannel test_touch;
    private DcMotor test_motor;
    
    @Override
    public void runOpMode(){
        //get the touch sensor and motor from hardwareMap 
        test_touch = hardwareMap.get(DigitalChannel.class, "test_touch");
        test_motor = hardwareMap.get(DcMotor.class, "test_moto");
        
    }
}
```

Notice in the example lines of code that the `hardwareMap.get()` for test\_motor is written as "test\_moto" rather than "test\_motor." When the code is building, there is no immediate check that the name requested is in the hardwareMap. This check is done when code is run on the robot. When the communication to the hardwareMap is initiated it looks for "test\_moto" and when it can not find it, it creates the runtime error referenced above.

